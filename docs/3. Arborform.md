# Arborform

## Introduction

Pawpaw supports the rapid creation of complex text parsers using the arborform module.  Arborform consists of two class hierarchies:

``Itorator``[^itorator_name]: Generator-based pipelined ``Ito`` creation 
``Postorator``: Pipelined ``Ito`` sequence consolidation

## The Pipeline

Pawpaw's arborform supports rapid parser creation using a divide and conquer strategy composed of discrete, pipelined steps.  Steps are peformed by ``Itorator`` instances, which operate on an ``Ito`` sequence.  An ``Itorator``, at the most basic level, takes an ``Ito`` and transforms into a new ``Ito`` *sequence*:

```mermaid
flowchart LR
  subgraph iter["iter()"]
  Ito ==>B["typing.Sequence[Ito]"]
  end
```

Itorator's are chained together via the ``itor_next`` and ``itor_children`` properties.  For each incoming ``Ito``, an ``Itorator``:

1. Performs the transformation ``Ito`` â†’ ``typing.Sequence[Ito]``
2. Passes each resulting ``Ito`` to:
   1. ``itor_children`` (if any)
      - *Results are appended to the input ``Ito``*
   2. ``itor_next``
      - *Results are returned instead of the input ``Ito``*
3. If ``itor_next`` is ``None``, the transformed ``Ito`` sequence is simply returned
   
## Topology

```mermaid
classDiagram
    Itorator <|-- Wrap
    Itorator <|-- Reflect
    Itorator <|-- Desc
    Itorator <|-- Group
    Itorator <|-- Split
    Itorator <|-- Extract
    Itorator : +itor_next Itorator | Types.F_ITO_2_ITOR
    Itorator : +itor_children Itorator | Types.F_ITO_2_ITOR
    Itorator: +_iter() Types.F_ITO_2_ITOR
    Itorator: +traverse(ITO) Types.C_IT_ITOS
```

[^itorator_name]: The name "Itorator" comes from a portmanteau of "Ito" and "Iterator"
